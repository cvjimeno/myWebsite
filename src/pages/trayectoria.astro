---
// src/pages/trayectoria.astro
import BaseLayout from '../layouts/BaseLayout.astro';
import TimelineItem from '../components/career/TimelineItem.astro';
import { getTagClasses } from '../utils/tagUtils'; // We'll reuse your tag styling

// --- DATA: TIMELINE ---
// We'll use more descriptive, results-oriented text here.
import philipsLogo from '../assets/images/logos/philips-logo.svg';
import kclLogo from '../assets/images/logos/kcl-logo.png';
import cnicLogo from '../assets/images/logos/cnic-logo.png';
import ucmLogo from '../assets/images/logos/cnic-logo.png'; // Assuming you have a UCM logo

const careerPath = [
  {
    logoSrc: philipsLogo,
    logoAlt: 'Philips Logo',
    role: 'Clinical Scientist',
    institutionName: 'Philips',
    institutionColorClass: 'text-accent-primary',
    dates: 'Ene 2025 - Actualidad',
    descriptionLines: [
      'Proporciono soporte científico y técnico a una red de más de 15 hospitales y centros de investigación de referencia en Iberia, centrándome en la Resonancia Magnética (RM) avanzada.',
      'Colaboro en proyectos de investigación, ayudo a optimizar protocolos de adquisición y reconstrucción, y actúo como puente entre las necesidades clínicas y las soluciones tecnológicas de Philips.'
    ],
  },
  {
    logoSrc: kclLogo,
    logoAlt: "King's College London Logo",
    role: 'Investigador Post-Doctoral',
    institutionName: "King's College London",
    institutionColorClass: 'text-red-600',
    dates: 'Dic 2019 - Dic 2024',
    descriptionLines: [
      'Desarrollé nuevas técnicas de adquisición y reconstrucción de RM para aplicaciones cardiovasculares y neurológicas, trabajando en el King\'s College Hospital.',
      'Mi trabajo se centró en secuencias de RM cuantitativas y en la aplicación de modelos de machine learning para acelerar los tiempos de escaneo y mejorar la calidad de imagen.'
    ],
  },
  {
    logoSrc: cnicLogo,
    logoAlt: 'CNIC Logo',
    role: 'Investigador Pre-Doctoral (PhD)',
    institutionName: 'Centro Nacional de Investigaciones Cardiovasculares (CNIC)',
    institutionColorClass: 'text-red-800',
    dates: 'Sep 2015 - Nov 2019',
    descriptionLines: [
      'Mi tesis se centró en el desarrollo de nuevas técnicas de imagen multimodal (PET/RM) para el estudio de la aterosclerosis.',
      'Investigué el uso de nanopartículas como agentes de contraste para PET y optimicé los protocolos de imagen para su detección y cuantificación.'
    ],
  },
   {
    logoSrc: ucmLogo, // Using the same logo for both
    logoAlt: 'Universidad Complutense de Madrid Logo',
    role: 'Máster en Física Biomédica',
    institutionName: 'Universidad Complutense de Madrid',
    institutionColorClass: 'text-fuchsia-700', // Example color
    dates: '2014 - 2015',
    descriptionLines: [
      'Especialización en las bases físicas de las técnicas de imagen médica, radioterapia y instrumentación biomédica.',
      // Add more details if you wish
    ],
  },
  {
    logoSrc: ucmLogo, // Using the same logo for both
    logoAlt: 'Universidad Complutense de Madrid Logo',
    role: 'Grado en Física',
    institutionName: 'Universidad Complutense de Madrid',
    institutionColorClass: 'text-fuchsia-700', // Example color
    dates: '2010 - 2014',
    descriptionLines: [
      'Formación fundamental en todas las áreas de la física, con especialización en física teórica y matemática.',
      'Este grado me proporcionó la base analítica y de resolución de problemas que he aplicado a lo largo de toda mi carrera.'
    ],
  },
];

// --- DATA: PUBLICATIONS ---
// Here is where you will add your publication data.
const publications = [
  {
    year: '2023',
    journal: 'Magnetic Resonance in Medicine',
    title: 'High-resolution motion-corrected cardiac quantitative mapping using a 3D dual-phase radial-cartesian acquisition',
    authors: 'Velasco C, Cruz G, et al.',
    link: 'https://onlinelibrary.wiley.com/doi/abs/10.1002/mrm.29748',
    tags: ['MRI', 'Cardiovascular', 'Reconstrucción de Imagen'],
  },
  {
    year: '2021',
    journal: 'Journal of Nuclear Cardiology',
    title: 'Characterization of a novel automated respiratory motion correction algorithm for clinical cardiac PET/CT',
    authors: 'Velasco C, et al.',
    link: 'https://link.springer.com/article/10.1007/s12350-020-02075-x',
    tags: ['PET', 'Cardiovascular', 'Algoritmos'],
  },
  {
    year: '2019',
    journal: 'Scientific Reports',
    title: 'Atherosclerosis imaging with a new 68Ga-labeled D-mannose derivative for PET/CT and its evaluation in an animal model',
    authors: 'Velasco C, et al.',
    link: 'https://www.nature.com/articles/s41598-019-54845-0',
    tags: ['PET', 'Nanopartículas', 'Aterosclerosis'],
  },
  // Add more publications here...
];

const pageTitle = "Mi Trayectoria";
const introText = "Un resumen de mi camino profesional y académico, desde la investigación fundamental hasta la aplicación de la ciencia de datos e IA en entornos clínicos e industriales.";
---

<BaseLayout title={pageTitle} description={introText}>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-20">
    
    <!-- Section 1: Introduction -->
    <header class="max-w-3xl mx-auto text-center mb-16 md:mb-20">
      <h1 class="text-5xl md:text-6xl font-bold text-text-primary mb-6">
        {pageTitle}
      </h1>
      <p class="text-xl text-text-secondary leading-relaxed">
        {introText}
      </p>
    </header>

    <!-- Section 2: Timeline -->
    <section id="timeline" class="mb-16 md:mb-24">
      <h2 class="text-3xl md:text-4xl font-semibold text-text-primary mb-12 text-center">Viaje Profesional</h2>
      <ol class="relative max-w-4xl mx-auto">
        {careerPath.map((item, index) => (
          <TimelineItem {...item} isLastItem={index === careerPath.length - 1} />
        ))}
      </ol>
    </section>

    <!-- Section 3: Publications -->
    <section id="publications" class="mb-16 md:mb-24">
      <h2 class="text-3xl md:text-4xl font-semibold text-text-primary mb-12 text-center">Publicaciones Destacadas</h2>
      <div class="max-w-4xl mx-auto space-y-10">
        {/* Special Highlight for your PhD Thesis */}
        <div class="p-6 bg-bg-secondary dark:bg-bg-secondary rounded-lg border-l-4 border-accent-primary">
          <h3 class="font-semibold text-text-primary mb-2">Mi Tesis Doctoral</h3>
          <p class="text-text-secondary mb-3">"Novel Molecular Imaging Agents for the Evaluation of Atherosclerosis"</p>
          <a href="#YOUR_THESIS_LINK" target="_blank" rel="noopener noreferrer" class="text-accent-primary font-medium hover:underline">
            Leer la tesis completa →
          </a>
        </div>

        {/* The new, elegant publication list */}
        {publications.map(pub => (
          <div class="grid grid-cols-1 md:grid-cols-4 gap-x-8 py-4 border-b border-border-card last:border-b-0">
            <div class="md:col-span-1 text-sm text-text-secondary mb-2 md:mb-0">
              <p class="font-semibold">{pub.year}</p>
              <p>{pub.journal}</p>
            </div>
            <div class="md:col-span-3">
              <h4 class="text-lg font-semibold text-text-primary mb-1">
                <a href={pub.link} target="_blank" rel="noopener noreferrer" class="hover:text-accent-primary transition-colors">
                  {pub.title}
                </a>
              </h4>
              <p class="text-sm text-text-secondary mb-3">{pub.authors}</p>
              <div class="flex flex-wrap gap-2">
                {pub.tags.map(tag => (
                  <span class:list={[ "text-xs font-semibold px-3 py-1 rounded-lg", getTagClasses(tag) ]}>
                    {tag}
                  </span>
                ))}
              </div>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- Section 4: Let's Connect -->
    <section id="connect" class="text-center">
      <h2 class="text-3xl md:text-4xl font-semibold text-text-primary mb-6">Conecta Conmigo</h2>
      <div class="flex flex-wrap justify-center items-center gap-x-6 gap-y-3">
        <a href="https://scholar.google.com/citations?user=0gpttXAAAAAJ&hl=es" target="_blank" rel="noopener noreferrer" class="text-lg text-accent-primary hover:underline underline-offset-4">
          Google Scholar
        </a>
        <a href="https://linkedin.com/in/carlos-velasco-jimeno/" target="_blank" rel="noopener noreferrer" class="text-lg text-accent-primary hover:underline underline-offset-4">
          LinkedIn
        </a>
        <a href="/contacto" class="text-lg text-accent-primary hover:underline underline-offset-4">
          Contacto Directo
        </a>
      </div>
    </section>

  </div>
</BaseLayout>